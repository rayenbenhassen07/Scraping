{%extends "base.html"%} {%block content%} {% if user.is_authenticated %}
<main>
  <section>
    <h2>Overview</h2>
    <p>This is your dashboard where you can manage your application.</p>
  </section>
  <section>
    <h2>Websites</h2>
    <!-- Modal Trigger -->
    <a class="waves-effect green waves-light btn modal-trigger" href="#modal1">
      <i class="large material-icons white-text center">add</i>
    </a>

    <!-- Modal add  -->
    <div id="modal1" class="modal">
      <div class="modal-content">
        <div class="close">
          <a class="modal-close waves-effect red waves-ligh btn"
            ><i class="large material-icons white-text center">close</i></a
          >
        </div>

        <h4>Modal Header</h4>
        <p>A bunch of text</p>
        <div>
          <form id="add_website" method="POST" action="{% url 'add_website' %}">
            {% csrf_token %}

            <div class="input-field col s12">
              <select id="store_type" name="store_type" class="browser-default">
                <option value="" disabled selected>
                  Choose your store type
                </option>
                <option value="wordpress">WordPress</option>
                <option value="shopify">Shopify</option>
                <option value="magento">Magento</option>
                <!-- Add more options as needed -->
              </select>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="Parazone"
                  id="store_title"
                  type="text"
                  name="store_title"
                  class="validate"
                />
                <label for="store_title">Store Title</label>
              </div>
              <div class="input-field col s6">
                <input
                  placeholder="URL"
                  id="store_logo"
                  type="text"
                  name="store_logo"
                  class="validate"
                />
                <label for="store_logo">Store Logo</label>
              </div>
              <div class="input-field col s6">
                <input
                  placeholder="URL"
                  id="store_url"
                  type="text"
                  name="store_url"
                  class="validate"
                />
                <label for="store_url">Store URL</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="p,h1,h2,span,strong..."
                  id="title_tag"
                  type="text"
                  name="title_tag"
                  class="validate"
                />
                <label for="title_tag">Title Tag</label>
              </div>
              <div class="input-field col s12">
                <select
                  id="title_class"
                  name="title_class"
                  class="browser-default"
                >
                  <option value="class" selected>class</option>
                  <option value="id">id</option>
                </select>
              </div>

              <div class="input-field col s6">
                <input
                  placeholder="<class =  '.....'  >"
                  id="title_content"
                  type="text"
                  name="title_content"
                  class="validate"
                />
                <label for="title_content">Title Content</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="p,h1,h2,span,strong..."
                  id="price_tag"
                  type="text"
                  name="price_tag"
                  class="validate"
                />
                <label for="price_tag">Price Tag</label>
              </div>

              <div class="input-field col s12">
                <select
                  id="price_class"
                  name="price_class"
                  class="browser-default"
                >
                  <option value="class" selected>class</option>
                  <option value="id">id</option>
                </select>
              </div>
              <div class="input-field col s6">
                <input
                  placeholder="<class =  '.....'  >"
                  id="price_content"
                  type="text"
                  name="price_content"
                  class="validate"
                />
                <label for="price_content">Price Content</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="p,h1,h2,span,strong..."
                  id="availability_tag"
                  type="text"
                  name="availability_tag"
                  class="validate"
                />
                <label for="availability_tag">Availability Tag</label>
              </div>

              <div class="input-field col s12">
                <select
                  id="availability_class"
                  name="availability_class"
                  class="browser-default"
                >
                  <option value="class" selected>class</option>
                  <option value="id">id</option>
                </select>
              </div>
              <div class="input-field col s6">
                <input
                  placeholder="<class =  '.....'  >"
                  id="availability_content"
                  type="text"
                  name="availability_content"
                  class="validate"
                />
                <label for="availability_content">Availability Content</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="p,h1,h2,span,strong..."
                  id="sku_tag"
                  type="text"
                  name="sku_tag"
                  class="validate"
                />
                <label for="sku_tag">SKU Tag</label>
              </div>

              <div class="input-field col s12">
                <select id="sku_class" name="sku_class" class="browser-default">
                  <option value="class" selected>class</option>
                  <option value="id">id</option>
                </select>
              </div>

              <div class="input-field col s6">
                <input
                  placeholder="<class =  '.....'  >"
                  id="sku_content"
                  type="text"
                  name="sku_content"
                  class="validate"
                />
                <label for="sku_content">SKU Content</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="p,h1,h2,span,strong..."
                  id="ratings_tag"
                  type="text"
                  name="ratings_tag"
                  class="validate"
                />
                <label for="ratings_tag">Ratings Tag</label>
              </div>

              <div class="input-field col s12">
                <select
                  id="ratings_class"
                  name="ratings_class"
                  class="browser-default"
                >
                  <option value="class" selected>class</option>
                  <option value="id">id</option>
                </select>
              </div>
              <div class="input-field col s6">
                <input
                  placeholder="<class =  '.....'  >"
                  id="ratings_content"
                  type="text"
                  name="ratings_content"
                  class="validate"
                />
                <label for="ratings_content">Ratings Content</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input
                  placeholder="p,h1,h2,span,strong..."
                  id="nbr_ratings_tag"
                  type="text"
                  name="nbr_ratings_tag"
                  class="validate"
                />
                <label for="nbr_ratings_tag">Number of Ratings Tag</label>
              </div>

              <div class="input-field col s12">
                <select
                  id="nbr_ratings_class"
                  name="nbr_ratings_class"
                  class="browser-default"
                >
                  <option value="class" selected>class</option>
                  <option value="id">id</option>
                </select>
              </div>
              <div class="input-field col s6">
                <input
                  placeholder="<class =  '.....'  >"
                  id="nbr_ratings_content"
                  type="text"
                  name="nbr_ratings_content"
                  class="validate"
                />
                <label for="nbr_ratings_content"
                  >Number of Ratings Content</label
                >
              </div>
            </div>
            <div class="input-field col s6">
              <input
                placeholder="7,3"
                id="delivery_price"
                type="text"
                name="delivry_price"
                class="validate"
              />
              <label for="delivery_price">Delivery Price</label>
            </div>
            <div class="input-field col s6">
              <input
                placeholder="10% off"
                id="offer"
                type="text"
                name="offre"
                class="validate"
              />
              <label for="offer">Offre</label>
            </div>
            <div class="input-field col s6">
              <input
                placeholder="Sitemap1, Sitemap2 , Sitemap3 ..."
                id="sitemap"
                type="text"
                name="sitemap"
                class="validate"
              />
              <label for="sitemap">Sitemap URL</label>
            </div>
            <div class="btn-modal">
              <button class="btn" type="submit">Add</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal edit -->
    {% for web in website %}
    <div id="modal-{{web.id}}" class="modal">
      <div class="modal-content">
        <div class="close">
          <a class="modal-close waves-effect red waves-ligh btn"
            ><i class="large material-icons white-text center">close</i></a
          >
        </div>
        <h4>Edit Website</h4>
        <form method="POST" action="{% url 'edit_website' web.id %}">
          {% csrf_token %}
          
          <div class="input-field col s6">
            <input
              id="store_type{{ web.id }}"
              type="text"
              name="store_type"
              class="validate"
              value="{{ web.store_type }}"
              disabled
            />
            <label for="store_type{{ web.id }}">Store type</label>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="store_title{{ web.id }}" type="text" name="store_title" class="validate" value="{{ web.store_title }}" />
              <label for="store_title{{ web.id }}">Store Title</label>
            </div>
            <div class="input-field col s6">
              <input id="store_logo{{ web.id }}" type="text" name="store_logo" class="validate" value="{{ web.store_logo }}" />
              <label for="store_logo{{ web.id }}">Store Logo</label>
            </div>
            <div class="input-field col s6">
              <input id="store_url{{ web.id }}" type="text" name="store_url" class="validate" value="{{ web.store_url }}" />
              <label for="store_url{{ web.id }}">Store URL</label>
            </div>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="title_tag{{ web.id }}" type="text" name="title_tag" class="validate" value="{{ web.title_tag }}" />
              <label for="title_tag{{ web.id }}">Title Tag</label>
            </div>
            <div class="input-field col s12">
              <select id="title_class{{ web.id }}" name="title_class" class="browser-default">
                <option value="class" {%if web.title_class == "class"%}selected{%endif%}>class</option>
                <option value="id" {%if web.title_class == "id"%}selected{%endif%}>id</option>
              </select>
            </div>
            <div class="input-field col s6">
              <input id="title_content{{ web.id }}" type="text" name="title_content" class="validate" value="{{ web.title_content }}" />
              <label for="title_content{{ web.id }}">Title Content</label>
            </div>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="price_tag{{ web.id }}" type="text" name="price_tag" class="validate" value="{{ web.price_tag }}" />
              <label for="price_tag{{ web.id }}">Price Tag</label>
            </div>
            <div class="input-field col s12">
              <select id="price_class{{ web.id }}" name="price_class" class="browser-default">
                <option value="class" {%if web.price_class == "class"%}selected{%endif%}>class</option>
                <option value="id" {%if web.price_class == "id"%}selected{%endif%}>id</option>
              </select>
            </div>
            <div class="input-field col s6">
              <input id="price_content{{ web.id }}" type="text" name="price_content" class="validate" value="{{ web.price_content }}" />
              <label for="price_content{{ web.id }}">Price Content</label>
            </div>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="availability_tag{{ web.id }}" type="text" name="availability_tag" class="validate" value="{{ web.availability_tag }}" />
              <label for="availability_tag{{ web.id }}">Availability Tag</label>
            </div>
            <div class="input-field col s12">
              <select id="availability_class{{ web.id }}" name="availability_class" class="browser-default">
                <option value="class" {%if web.availability_class == "class"%}selected{%endif%}>class</option>
                <option value="id" {%if web.availability_class == "id"%}selected{%endif%}>id</option>
              </select>
            </div>
            <div class="input-field col s6">
              <input id="availability_content{{ web.id }}" type="text" name="availability_content" class="validate" value="{{ web.availability_content }}" />
              <label for="availability_content{{ web.id }}">Availability Content</label>
            </div>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="sku_tag{{ web.id }}" type="text" name="sku_tag" class="validate" value="{{ web.sku_tag }}" />
              <label for="sku_tag{{ web.id }}">SKU Tag</label>
            </div>
            <div class="input-field col s12">
              <select id="sku_class{{ web.id }}" name="sku_class" class="browser-default">
                <option value="class" {%if web.sku_class == "class"%}selected{%endif%}>class</option>
                <option value="id" {%if web.sku_class == "id"%}selected{%endif%}>id</option>
              </select>
            </div>
            <div class="input-field col s6">
              <input id="sku_content{{ web.id }}" type="text" name="sku_content" class="validate" value="{{ web.sku_content }}" />
              <label for="sku_content{{ web.id }}">SKU Content</label>
            </div>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="ratings_tag{{ web.id }}" type="text" name="ratings_tag" class="validate" value="{{ web.ratings_tag }}" />
              <label for="ratings_tag{{ web.id }}">Ratings Tag</label>
            </div>
            <div class="input-field col s12">
              <select id="ratings_class{{ web.id }}" name="ratings_class" class="browser-default">
                <option value="class" {%if web.ratings_class == "class"%}selected{%endif%}>class</option>
                <option value="id" {%if web.ratings_class == "id"%}selected{%endif%}>id</option>
              </select>
            </div>
            <div class="input-field col s6">
              <input id="ratings_content{{ web.id }}" type="text" name="ratings_content" class="validate" value="{{ web.ratings_content }}" />
              <label for="ratings_content{{ web.id }}">Ratings Content</label>
            </div>
          </div>
        
          <div class="row">
            <div class="input-field col s6">
              <input id="nbr_ratings_tag{{ web.id }}" type="text" name="nbr_ratings_tag" class="validate" value="{{ web.nbr_ratings_tag }}" />
              <label for="nbr_ratings_tag{{ web.id }}">Number of Ratings Tag</label>
            </div>
            <div class="input-field col s12">
              <select id="nbr_ratings_class{{ web.id }}" name="nbr_ratings_class" class="browser-default">
                <option value="class" {%if web.nbr_ratings_class == "class"%}selected{%endif%}>class</option>
                <option value="id" {%if web.nbr_ratings_class == "id"%}selected{%endif%}>id</option>
              </select>
            </div>
            <div class="input-field col s6">
              <input id="nbr_ratings_content{{ web.id }}" type="text" name="nbr_ratings_content" class="validate" value="{{ web.nbr_ratings_content }}" />
              <label for="nbr_ratings_content{{ web.id }}">Number of Ratings Content</label>
            </div>
          </div>
        
          <div class="input-field col s6">
            <input id="delivery_price{{ web.id }}" type="text" name="delivry_price" class="validate" value="{{ web.delivry_price }}" />
            <label for="delivery_price{{ web.id }}">Delivery Price</label>
          </div>
        
          <div class="input-field col s6">
            <input id="offer{{ web.id }}" type="text" name="offre" class="validate" value="{{ web.offre }}" />
            <label for="offer{{ web.id }}">Offer</label>
          </div>
        
          <div class="input-field col s6">
            <input id="sitemap{{ web.id }}" type="text" name="sitemap" class="validate" value="{{ web.sitemap }}" />
            <label for="sitemap{{ web.id }}">Sitemap URL</label>
          </div>
        
          <div class="btn-modal">
            <button type="submit" class="btn green">Save</button>
            <button type="button" class="modal-close btn red">Close</button>
          </div>
        </form>
        
      </div>
    </div>
    {% endfor %}

    <ul>
      {% for web in website %}

      <li class="flex justify-between">
        <div>
          <img src="{{web.store_logo}}" alt="Website Image" width="100" />
        </div>
        <div>{{web.store_title}}</div>
        <div>
          <a
            class="waves-effect lightgreen waves-ligh btn"
            href="{% url 'preview_website' web.id %}"
            ><i class="large material-icons white-text center"
              >remove_red_eye</i
            ></a
          >
          <a
            class="waves-effect green waves-ligh btn"
            href="{% url 'run_website' web.id %}"
            ><i class="large material-icons white-text center"
              >directions_run</i
            ></a
          >
          <a
            class="modal-trigger waves-effect black waves-ligh btn"
            href="#modal-{{web.id}}"
            ><i class="large material-icons white-text center">edit</i></a
          >

          <a
            href="{% url 'delete_website' web.id %}"
            class="waves-effect red waves-ligh btn"
            ><i class="large material-icons white-text center"
              >delete_sweep</i
            ></a
          >
        </div>
      </li>
      {% endfor %}
    </ul>
  </section>
</main>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
  (function ($) {
    $(function () {
      //initialize all modals
      $(".modal").modal();

      //or by click on trigger
      $(".trigger-modal").modal();
    }); // end of document ready
  })(jQuery); // end of jQuery name space

  // select
  $(document).ready(function () {
    $("select").formSelect();
    // Old way
    // $('select').material_select();
  });

  document.addEventListener("DOMContentLoaded", function () {
    var elems = document.querySelectorAll("select");
    var instances = M.FormSelect.init(elems);
  });
</script>

{% else %}

<script>
  window.location.href = "/login";
</script>

{% endif %} {%endblock%}
